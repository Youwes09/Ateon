@use "../layouts" as *;
@use "../abstracts" as *;
@use "sass:color";

.dock-window {
  background-color: transparent;
}

.dock-container {
  background-color: transparent;
  padding: 6px;
  min-height: 70px;
}

.dock {
  background-color: color.adjust($bg, $alpha: -0.3);
  padding: 3px 5px;
  border: none;
  border-radius: $round;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);

  &.hidden {
    background-color: transparent;
    box-shadow: none;
  }
}

.dock-item {
  padding: 2px;
  background-color: transparent;
  border: none;
  border-radius: $round;
  transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
  min-width: 44px;
  max-width: 44px;
  min-height: 44px;
  max-height: 44px;

  .icon-background {
    background-color: color.adjust($fg, $alpha: -0.92);
    border-radius: calc(#{$round} - 2px);
    padding: 6px;
    min-width: 40px;
    max-width: 40px;
    min-height: 40px;
    max-height: 40px;
    transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  image {
    opacity: 0.7;
    transition: opacity 0.2s ease;
  }

  &:hover {
    margin-top: -6px;

    .icon-background {
      background-color: color.adjust($fg, $alpha: -0.88);
    }

    image {
      opacity: 1;
    }
  }

  &.active {
    .icon-background {
      background-color: color.adjust($primary, $alpha: -0.75);
    }

    image {
      opacity: 1;
    }
  }

  // Dynamic staggered fade based on distance from last hovered icon
  @for $i from 0 through 9 {
    &:nth-child(#{$i + 1}) {
      .dock.hidden & {
        $delay: calc(abs(#{$i} - var(--last-hovered, 4)) * 0.05s);
        
        .icon-background {
          background-color: transparent;
          transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
          transition-delay: $delay;
        }

        image {
          opacity: 0;
          transition: opacity 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
          transition-delay: $delay;
        }
      }
    }
  }
}