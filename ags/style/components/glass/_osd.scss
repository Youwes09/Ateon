@use "../../layouts" as *;
@use "../../abstracts" as *;
@use "sass:color";

.osd {
  @include window;
  background: linear-gradient(
    135deg,
    color.adjust($bg, $alpha: -0.12, $lightness: 6%),
    color.adjust($bg, $alpha: -0.18, $lightness: 2%)
  );
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  border: 1px solid color.adjust($fg, $alpha: -0.88);
  border-radius: 3rem;
  box-shadow: 
    0 20px 60px rgba(0, 0, 0, 0.4),
    0 8px 20px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 color.adjust($fg, $alpha: -0.92),
    inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  margin: 5rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;

  // Glass reflection effect
  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(
      to bottom,
      color.adjust($fg, $alpha: -0.95),
      transparent
    );
    border-radius: 3rem 3rem 0 0;
    pointer-events: none;
    z-index: 0;
  }

  // Ensure content is above glass overlay
  > * {
    position: relative;
    z-index: 1;
  }

  image {
    -gtk-icon-size: 4rem;
    margin: 0.5rem;
    filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3));
    opacity: 0.9;
  }

  box {
    margin: 0.5rem;
  }

  label {
    margin: 0 0 0.5rem;
    font-weight: 600;
    font-size: 1rem;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  levelbar {
    trough {
      margin: 0.5rem 0.5rem;
      min-height: 1rem;
      border-radius: 1.5rem;
      background: linear-gradient(
        135deg,
        color.adjust($fg, $alpha: -0.92),
        color.adjust($fg, $alpha: -0.95)
      );
      border: 1px solid color.adjust($fg, $alpha: -0.9);
      box-shadow: 
        inset 0 2px 4px rgba(0, 0, 0, 0.15),
        0 1px 0 color.adjust($fg, $alpha: -0.95);
      position: relative;
      overflow: hidden;

      &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 50%;
        background: linear-gradient(
          to bottom,
          color.adjust($fg, $alpha: -0.9),
          transparent
        );
        border-radius: 1.5rem 1.5rem 0 0;
        pointer-events: none;
      }
    }

    block {
      min-height: 1rem;
    }

    block.filled {
      border-radius: 1.5rem;
      background: linear-gradient(
        135deg,
        color.adjust($primary, $alpha: -0.15),
        color.adjust($primary, $alpha: -0.25)
      );
      box-shadow: 
        0 0 12px color.adjust($primary, $alpha: -0.5),
        0 0 20px color.adjust($primary, $alpha: -0.75),
        inset 0 1px 1px color.adjust($primary, $alpha: -0.3, $lightness: 15%),
        inset 0 -1px 1px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;

      &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 50%;
        background: linear-gradient(
          to bottom,
          color.adjust($primary, $alpha: -0.2, $lightness: 20%),
          transparent
        );
        border-radius: 1.5rem 1.5rem 0 0;
        pointer-events: none;
      }
    }
  }
}